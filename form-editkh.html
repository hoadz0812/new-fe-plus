<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Nhom3</title>
    <meta
      name="description"
      content="Doodle is a Dashboard & Admin Site Responsive Template by hencework."
    />
    <meta
      name="keywords"
      content="admin, admin dashboard, admin template, cms, crm, Doodle Admin, Doodleadmin, premium admin templates, responsive admin, sass, panel, software, ui, visualization, web app, application"
    />
    <meta name="author" content="hencework" />

    <!-- Favicon -->
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />

    <!-- Morris Charts CSS -->
    <link
      href="vendors/bower_components/morris.js/morris.css"
      rel="stylesheet"
      type="text/css"
    />

    <!-- Data table CSS -->
    <link
      href="vendors/bower_components/datatables/media/css/jquery.dataTables.min.css"
      rel="stylesheet"
      type="text/css"
    />

    <link
      href="vendors/bower_components/jquery-toast-plugin/dist/jquery.toast.min.css"
      rel="stylesheet"
      type="text/css"
    />

    <!-- Custom CSS -->
    <link href="dist/css/style.css" rel="stylesheet" type="text/css" />

    <script src="authes/auth.js"></script>
  </head>

  <body>
    <!-- Preloader -->
    <div class="preloader-it">
      <div class="la-anim-1"></div>
    </div>
    <!-- /Preloader -->
    <div class="wrapper theme-1-active pimary-color-red">
      <!-- Top Menu Items -->
      <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="mobile-only-brand pull-left">
          <div class="nav-header pull-left">
            <div class="logo-wrap">
              <a href="index.html">
                <img class="brand-img" src="dist/img/three.png" alt="brand" />
                <span class="brand-text">Nhom3</span>
              </a>
            </div>
          </div>
          <a
            id="toggle_nav_btn"
            class="toggle-left-nav-btn inline-block ml-20 pull-left"
            href="javascript:void(0);"
            ><i class="zmdi zmdi-menu"></i
          ></a>
          <a
            id="toggle_mobile_search"
            data-toggle="collapse"
            data-target="#search_form"
            class="mobile-only-view"
            href="javascript:void(0);"
            ><i class="zmdi zmdi-search"></i
          ></a>
          <a
            id="toggle_mobile_nav"
            class="mobile-only-view"
            href="javascript:void(0);"
            ><i class="zmdi zmdi-more"></i
          ></a>
        </div>
        <div id="mobile_only_nav" class="mobile-only-nav pull-right">
          <ul class="nav navbar-right top-nav pull-right">
            <li>
              <a id="open_right_sidebar" href="#"
                ><i class="zmdi zmdi-settings top-nav-icon"></i
              ></a>
            </li>

            <li class="dropdown auth-drp">
              <a href="#" class="dropdown-toggle pr-0" data-toggle="dropdown">
                <img
                  src="dist/img/user1.png"
                  alt="user_auth"
                  class="user-auth-img img-circle" />
                <span class="user-online-status"></span
              ></a>
              <ul
                class="dropdown-menu user-auth-dropdown"
                data-dropdown-in="flipInX"
                data-dropdown-out="flipOutX"
              >
                <li>
                  <a href="profile.html"
                    ><i class="zmdi zmdi-account"></i><span>Profile</span></a
                  >
                </li>
                <li>
                  <a href="#"
                    ><i class="zmdi zmdi-card"></i><span>my balance</span></a
                  >
                </li>
                <li>
                  <a href="inbox.html"
                    ><i class="zmdi zmdi-email"></i><span>Inbox</span></a
                  >
                </li>
                <li>
                  <a href="#"
                    ><i class="zmdi zmdi-settings"></i><span>Settings</span></a
                  >
                </li>
                <li class="divider"></li>
                <li class="sub-menu show-on-hover">
                  <a href="#" class="dropdown-toggle pr-0 level-2-drp"
                    ><i class="zmdi zmdi-check text-success"></i> available</a
                  >
                  <ul class="dropdown-menu open-left-side">
                    <li>
                      <a href="#"
                        ><i class="zmdi zmdi-check text-success"></i
                        ><span>available</span></a
                      >
                    </li>
                    <li>
                      <a href="#"
                        ><i class="zmdi zmdi-circle-o text-warning"></i
                        ><span>busy</span></a
                      >
                    </li>
                    <li>
                      <a href="#"
                        ><i
                          class="zmdi zmdi-minus-circle-outline text-danger"
                        ></i
                        ><span>offline</span></a
                      >
                    </li>
                  </ul>
                </li>
                <li class="divider"></li>
                <li id="logout" onclick="logout();">
                  <a href="#"
                    ><i class="zmdi zmdi-power"></i><span>Log Out</span></a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <!-- /Top Menu Items -->

      <!-- Left Sidebar Menu -->
      <div class="fixed-sidebar-left">
        <ul class="nav navbar-nav side-nav nicescroll-bar">
          <li>
            <a
              href="javascript:void(0);"
              data-toggle="collapse"
              data-target="#form_dr"
            >
              <div class="pull-left">
                <i class="zmdi zmdi-edit mr-20"></i
                ><span class="right-nav-text">Hệ thống</span>
              </div>
              <div class="pull-right"><i class="zmdi zmdi-caret-down"></i></div>
              <div class="clearfix"></div>
            </a>
            <ul id="form_dr" class="collapse collapse-level-1 two-col-list">
              <li>
                <a href="form-elementnewpass.html">Đổi mật khẩu</a>
              </li>
              <li>
                <a href="basic-tabletk.html">Danh sách User</a>
              </li>
            </ul>
          </li>
          <li>
            <a
              href="javascript:void(0);"
              data-toggle="collapse"
              data-target="#chart_dr"
            >
              <div class="pull-left">
                <i class="zmdi zmdi-chart-donut mr-20"></i
                ><span class="right-nav-text">Hóa Đơn </span>
              </div>
              <div class="pull-right"><i class="zmdi zmdi-caret-down"></i></div>
              <div class="clearfix"></div>
            </a>
            <ul id="chart_dr" class="collapse collapse-level-1 two-col-list">
              <li>
                <a href="form-elementhddv.html">Hóa Đơn Dịch Vụ</a>
              </li>
              <li>
                <a href="basic-tabletraphong.html"
                  >Hóa đơn thanh toán trả phòng</a
                >
              </li>
              <li>
                <a href="form-elementpt.html">Tạo phiếu thuê phòng</a>
              </li>
            </ul>
          </li>
          <li>
            <a
              href="javascript:void(0);"
              data-toggle="collapse"
              data-target="#table_dr"
            >
              <div class="pull-left">
                <i class="zmdi zmdi-format-size mr-20"></i
                ><span class="right-nav-text">Quản lý</span>
              </div>
              <div class="pull-right"><i class="zmdi zmdi-caret-down"></i></div>
              <div class="clearfix"></div>
            </a>
            <ul id="table_dr" class="collapse collapse-level-1 two-col-list">
              <li>
                <a href="basic-tablenv.html">Quản lý Nhân Viên</a>
              </li>
              <li>
                <a href="basic-tableph.html">Quản lý Phòng</a>
              </li>
              <li>
                <a href="basic-tabledv.html">Quản lý Dịch Vụ</a>
              </li>
              <li>
                <a href="basic-tablekh.html">Quản lý Khách Hàng</a>
              </li>
            </ul>
          </li>
          <li>
            <a
              href="javascript:void(0);"
              data-toggle="collapse"
              data-target="#icon_dr"
            >
              <div class="pull-left">
                <i class="zmdi zmdi-iridescent mr-20"></i
                ><span class="right-nav-text">Danh Sách</span>
              </div>
              <div class="pull-right"><i class="zmdi zmdi-caret-down"></i></div>
              <div class="clearfix"></div>
            </a>
            <ul id="icon_dr" class="collapse collapse-level-1">
              <li>
                <a href="basic-tablethddv.html">Danh Sách Hóa Đơn</a>
              </li>
              <li>
                <a href="basic-tablephongdatra.html">Danh Sách Phòng Đã Trả</a>
              </li>
            </ul>
          </li>

          <li>
            <hr class="light-grey-hr mb-10" />
          </li>
        </ul>
      </div>
      <!-- /Left Sidebar Menu -->
    </div>
    <!-- /#wrapper -->

    <!-- Main Content -->
    <div class="page-wrapper">
      <div class="container-fluid">
        <!-- Title -->
        <div class="row heading-bg">
          <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
            <h5 class="txt-dark">Sửa thông tin khách hàng</h5>
          </div>
          <!-- Breadcrumb -->
          <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
            <ol class="breadcrumb">
              <li><a href="index.html">Dashboard</a></li>
              <li>
                <a href="#"><span>form</span></a>
              </li>
              <li class="active"><span>form-element</span></li>
            </ol>
          </div>
          <!-- /Breadcrumb -->
        </div>
        <!-- /Title -->

        <!-- Row -->
        <div class="row">
          <div class="col-sm-12">
            <div class="panel panel-default card-view">
              <!-- <div class="panel-heading">
									<div class="pull-left">
										<h6 class="panel-title txt-dark">Basic Form</h6>
									</div>
									<div class="clearfix"></div>
								</div> -->
              <div class="panel-wrapper collapse in">
                <div class="panel-body">
                  <div class="form-wrap">
                    <form>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">Mã khách hàng
                          <span class="help"> KHMK123</span></label>
                        <input id="makh" type="text" class="form-control" name="makh" />
                      </div>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">Họ và tên khác hàng
                          <span class="help"> e.g. "john doe"</span></label>
                        <input type="text" class="form-control" name="tenkh" value="john doe..." required />
                      </div>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">Địa chỉ</label>
                        <input type="text" class="form-control" name="diachi" />
                      </div>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">Ngày sinh</label>
                        <input type="date" class="form-control" name="ngaysinh" min="1900-01-01" max="2015-12-31"/>
                        <span class="validity"></span>
                      </div>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">Số điện thoại</label>
                        <input type="text" class="form-control" name="sdt" placeholder="Số điện thoại" />
                      </div>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">Quốc tịch</label>
                        <input type="text" class="form-control" name="quoctich" />
                      </div>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">Hộ chiếu</label>
                        <input type="text" class="form-control" name="hochieu" />
                      </div>
                      <div class="form-group">
                        <label class="control-label mb-10 text-left">CCCD</label>
                        <input type="text" class="form-control" name="cccd" />
                      </div>
                      <div class="form-group mb-30">
                        <label class="control-label mb-10 text-left">Giới tính</label>
                        <div class="radio radio-info">
                          <input type="radio" name="radio" id="radio1" value="male" />
                          <label for="radio1"> Nam </label>
                        </div>
                        <div class="radio radio-info">
                          <input type="radio" name="radio" id="radio2" value="female" checked="" />
                          <label for="radio2"> Nữ </label>
                        </div>
                      </div>

                      <div class="form-group mb-0">
                        <button type="button" class="btn btn-success btn-anim" id="btnSubmit" onclick="createKH()">
                          <i class="icon-rocket"></i><span class="btn-text">submit</span>
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /Row -->
      </div>
    </div>
    <!-- /Main Content -->
  </div>
  <!-- /#wrapper -->

  <!-- JavaScript -->

  <!-- jQuery -->
  <script src="vendors/bower_components/jquery/dist/jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

  <script src="vendors/bower_components/jasny-bootstrap/dist/js/jasny-bootstrap.min.js"></script>

  <!-- Slimscroll JavaScript -->
  <script src="dist/js/jquery.slimscroll.js"></script>

  <!-- Fancy Dropdown JS -->
  <script src="dist/js/dropdown-bootstrap-extended.js"></script>

  <!-- Owl JavaScript -->
  <script src="vendors/bower_components/owl.carousel/dist/owl.carousel.min.js"></script>

  <!-- Switchery JavaScript -->
  <script src="vendors/bower_components/switchery/dist/switchery.min.js"></script>

  <!-- Init JavaScript -->
  <script src="dist/js/init.js"></script>

  <script src="authes/handles.js"></script>

  <script>
    const myKey = window.location.search;
        const params = new URLSearchParams(myKey);
        const id = params.get('id');
    
        getKHByID(id).then(data => {
          const makh = document.querySelector("input[name=makh]");
          const tenkh = document.querySelector("input[name=tenkh]");
          const diachi = document.querySelector("input[name=diachi]");
          const ngaysinh = document.querySelector("input[name=ngaysinh]");
          const sdt = document.querySelector("input[name=sdt]");
          const quoctich = document.querySelector("input[name=quoctich]");
          const cccd = document.querySelector("input[name=cccd]");
          const hochieu = document.querySelector("input[name=hochieu]");
          const radio = document.querySelector("input[name=radio]:checked");
            makh.value = data.makh;
            tenkh.value = data.tenkh;
            diachi.value = data.diachi;
            ngaysinh.value = data.ngaysinh;
            sdt.value = data.sdt;
            quoctich.value = data.quoctich;
            cccd.value = data.cccd;
            hochieu.value = data.hochieu;
            radio.value = data.gender;
          });

    function createKH() {
      const makh = document.querySelector("input[name=makh]").value;
      const tenkh = document.querySelector("input[name=tenkh]").value;
      const diachi = document.querySelector("input[name=diachi]").value;
      const ngaysinh = document.querySelector("input[name=ngaysinh]").value;
      const sdt = document.querySelector("input[name=sdt]").value;
      const quoctich = document.querySelector("input[name=quoctich]").value;
      const cccd = document.querySelector("input[name=cccd]").value;
      const hochieu = document.querySelector("input[name=hochieu]").value;
      const radio = document.querySelector("input[name=radio]:checked").value;

      const dataPost = {
        makh,
        tenkh,
        diachi,
        dob : ngaysinh,
        sdt,
        quoctich,
        cccd,
        hochieu,
        gender: radio,
      };
      updateKHById(id, dataPost).then((data) => {
            console.log(data);
            if (data.message) alert(data.message)
            else {
              // window.location.href = "basic-tablekh.html";
            }
          });
    }

    function logout(){
        localStorage.removeItem("tokens");
        window.location.href = "form-login.html";
      }
  </script>
</body>

</html>
